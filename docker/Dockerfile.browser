# Base image from the OpenClaw base build
FROM ghcr.io/sunwood-ai-oss-hub/agentos-openclaw-base:latest

# Switch to root user for global installations
USER root

# Install agent-browser globally
RUN npm install -g agent-browser

# Install Playwright globally first
RUN npm install -g playwright

# Install Playwright Chromium and dependencies
RUN npx playwright install --with-deps chromium

# Switch back to node user for security
USER node

# Set working directory
WORKDIR /app

# Keep the same entrypoint as base image
CMD ["node", "dist/index.js"]
